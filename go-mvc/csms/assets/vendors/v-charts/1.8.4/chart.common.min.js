"use strict";function _interopDefault(e){return e&&"object"==typeof e&&"default"in e?e.default:e}function getBarDimAxis(e){var t=e.innerRows,i=e.dimAxisName,a=e.dimension,n=e.axisVisible;return a.map(function(e){return{type:"category",name:i,nameLocation:"middle",nameGap:22,data:t.map(function(t){return t[e]}),axisLabel:{formatter:function(e){return String(e)}},show:n}})}function getBarMeaAxis(e){for(var t=e.meaAxisName,i=e.meaAxisType,a=e.axisVisible,n=e.digit,r=e.scale,o=e.min,s=e.max,l={type:"value",axisTick:{show:!1},show:a},c=[],u=0;u<2;u++)!function(e){i[e]?c[e]=_extends({},l,{axisLabel:{formatter:function(t){return getFormated(t,i[e],n)}}}):c[e]=_extends({},l),c[e].name=t[e]||"",c[e].scale=r[e]||!1,c[e].min=o[e]||null,c[e].max=s[e]||null}(u);return c}function getBarTooltip(e){var t=e.axisSite,i=e.isHistogram,a=e.meaAxisType,n=e.digit,r=e.labelMap,o=i?t.right:t.top;return r&&(o=o.map(function(e){return void 0===r[e]?e:r[e]})),{trigger:"axis",formatter:function(e){var t=[];return t.push(e[0].name+"<br>"),e.forEach(function(e){var i=e.seriesName,r=~o.indexOf(i)?a[1]:a[0];t.push(itemPoint(e.color)),t.push(i+": "),t.push(getFormated(e.value,r,n)),t.push("<br>")}),t.join("")}}}function getBarSeries(e){var t=e.innerRows,i=e.metrics,a=e.stack,n=e.axisSite,r=e.isHistogram,o=e.labelMap,s=e.itemStyle,l=e.label,c=e.showLine,u=void 0===c?[]:c,d=[],m={},h=r?n.right:n.top,f=r?"yAxisIndex":"xAxisIndex",p=a&&getStackMap(a);return i.forEach(function(e){m[e]=[]}),t.forEach(function(e){i.forEach(function(t){m[t].push(e[t])})}),!!(d=Object.keys(m).map(function(e){var t=defineProperty({name:o&&o[e]||e,type:~u.indexOf(e)?"line":"bar",data:m[e]},f,~h.indexOf(e)?"1":"0");return a&&p[e]&&(t.stack=p[e]),l&&(t.label=l),s&&(t.itemStyle=s),t})).length&&d}function getLegend(e){var t=e.metrics,i=e.labelMap,a=e.legendName;return a||i?{data:i?t.map(function(e){return null==i[e]?e:i[e]}):t,formatter:function(e){return a&&a[e]||e}}:{data:t}}function getLineXAxis(e){var t=e.dimension,i=e.rows,a=e.xAxisName,n=e.axisVisible;return t.map(function(e,t){return{type:"category",nameLocation:"middle",nameGap:22,boundaryGap:!1,name:a[t]||"",axisTick:{show:!0,lineStyle:{color:"#eee"}},data:i.map(function(t){return t[e]}),axisLabel:{formatter:function(e){return String(e)}},show:n}})}function getLineSeries(e){var t=e.rows,i=e.axisSite,a=e.metrics,n=e.area,r=e.stack,o=e.nullAddZero,s=e.labelMap,l=e.label,c=e.itemStyle,u=e.lineStyle,d=e.areaStyle,m=[],h={},f=r&&getStackMap(r);return a.forEach(function(e){h[e]=[]}),t.forEach(function(e){a.forEach(function(t){var i=null;null!=e[t]?i=e[t]:o&&(i=0),h[t].push(i)})}),a.forEach(function(e){var t={name:s&&s[e]||e,type:"line",data:h[e]};n&&(t.areaStyle={normal:{}}),t.yAxisIndex=~i.right.indexOf(e)?1:0,r&&f[e]&&(t.stack=f[e]),l&&(t.label=l),c&&(t.itemStyle=c),u&&(t.lineStyle=u),d&&(t.areaStyle=d),m.push(t)}),!!m.length&&m}function getLineYAxis(e){for(var t=e.yAxisName,i=e.yAxisType,a=e.axisVisible,n=e.scale,r=e.min,o=e.max,s=e.digit,l={type:"value",axisTick:{show:!1},show:a},c=[],u=0;u<2;u++)!function(e){i[e]?c[e]=_extends({},l,{axisLabel:{formatter:function(t){return getFormated(t,i[e],s)}}}):c[e]=_extends({},l),c[e].name=t[e]||"",c[e].scale=n[e]||!1,c[e].min=r[e]||null,c[e].max=o[e]||null}(u);return c}function getLineTooltip(e){var t=e.axisSite,i=e.yAxisType,a=e.digit,n=e.labelMap,r=n?t.right.map(function(e){return void 0===n[e]?e:n[e]}):t.right;return{trigger:"axis",formatter:function(e){var t=[];return t.push(e[0].name+"<br>"),e.forEach(function(e){var n=null,o=~r.indexOf(e.seriesName)?i[1]:i[0];n=getFormated(e.data,o,a),t.push(itemPoint(e.color)),t.push(e.seriesName+": "+n),t.push("<br>")}),t.join("")}}}function getLegend$1(e){var t=e.metrics,i=e.legendName,a=e.labelMap;return i||a?{data:a?t.map(function(e){return null==a[e]?e:a[e]}):t,formatter:function(e){return i&&i[e]||e}}:{data:t}}function getPieSeries(e){var t=e.innerRows,i=e.dataType,a=e.percentShow,n=e.dimension,r=e.metrics,o=e.radius,s=e.offsetY,l=e.selectedMode,c=e.hoverAnimation,u=e.digit,d=e.roseType,m=e.label,h=e.level,f=e.limitShowNum,p=e.isRing,g=[],v={},b=[];h?(h.forEach(function(e,t){e.forEach(function(e){v[e]=t})}),t.forEach(function(e){var t=v[e[n]];void 0!==t&&(b[t]?b[t].push(e):b[t]=[e])})):b.push(t);var x={type:"pie",selectedMode:l,hoverAnimation:c,roseType:d,center:["50%",s]},y=b.length;if(b.forEach(function(e,t){var s=_extends({data:[]},x),l=o/y;if(t){var c=l+o/(2*y)*(2*t-1),d=c+o/(2*y);s.radius=[c,d]}else s.radius=p?o:l;y>1&&0===t&&(s.label={normal:{position:"inner"}}),m&&(s.label=m),a&&(s.label={normal:{show:!0,position:y>1&&0===t?"inner":"outside",formatter:function(e){var t=[];return t.push(e.name+":"),t.push(getFormated(e.value,i,u)),t.push("("+e.percent+"%)"),t.join(" ")}}}),s.data=e.map(function(e){return{name:e[n],value:e[r]}}),g.push(s)}),f&&f<g[0].data.length){var S=g[0].data,A=0;S.slice(f,S.length).forEach(function(e){A+=e.value}),g[0].data=S.slice(0,f),g[0].data.push({name:"其他",value:A})}return g}function getPieLegend(e){var t=e.innerRows,i=e.dimension,a=e.legendLimit,n=e.level,r=e.limitShowNum,o=[],s=[];if(n)n.forEach(function(e){e.forEach(function(e){s.push(e)})}),o=s;else if(r&&r<t.length){for(var l=0;l<r;l++)o.push(t[l][i]);o.push("其他")}else o=t.map(function(e){return e[i]});return!!o.length&&{data:o,show:o.length<a}}function getPieTooltip(e){var t=e.dataType,i=e.innerRows,a=e.limitShowNum,n=e.digit,r=e.metrics,o=e.dimension,s=0,l=i.map(function(e){return s+=e[r],{name:e[o],value:e[r]}}).slice(a,i.length);return{formatter:function(e){var i=[];return i.push(itemPoint(e.color)),a&&"其他"===e.name?(i.push("其他:"),l.forEach(function(e){var a=e.name,r=e.value,o=getFormated(r/s,"percent");i.push("<br>"+a+":"),i.push(getFormated(r,t,n)),i.push("("+o+")")})):(i.push(e.name+":"),i.push(getFormated(e.value,t,n)),i.push("("+e.percent+"%)")),i.join(" ")}}}function getFunnelTooltip(e,t){return{trigger:"item",formatter:function(i){var a=[];return a.push(itemPoint(i.color)),a.push(i.name+": "+getFormated(i.data.realValue,e,t)),a.join("")}}}function getFunnelSeries(e){var t=e.dimension,i=e.metrics,a=e.rows,n=e.sequence,r=e.ascending,o={type:"funnel"};a.sort(function(e,i){return n.indexOf(e[t])-n.indexOf(i[t])});var s=!1;a.some(function(e,t){if(t&&e[i]>a[t-1][i])return s=!0,!0});var l=100/a.length;return o.data=s?a.slice().reverse().map(function(e,a){return{name:e[t],value:(a+1)*l,realValue:e[i]}}):a.map(function(e){return{name:e[t],value:e[i],realValue:e[i]}}),r&&(o.sort="ascending"),o}function getRadarLegend(e,t){return{data:e.map(function(e){return e[t]})}}function getRadarTooltip(e,t,i){var a=[],n=[];return t.indicator.map(function(t,i){a[i]=e[t.name],n[i]=t.name}),{formatter:function(e){var t=[];return t.push(itemPoint(e.color)),t.push(e.seriesName+"<br />"),e.data.value.forEach(function(e,r){t.push(n[r]+": "),t.push(getFormated(e,a[r],i)+"<br />")}),t.join("")}}}function getRadarSetting(e,t){var i={indicator:[],shape:"circle",splitNumber:5},a={};return e.forEach(function(e){t.forEach(function(t){a[t]?a[t].push(e[t]):a[t]=[e[t]]})}),i.indicator=Object.keys(a).map(function(e){return{name:e,max:Math.max.apply(null,a[e])}}),i}function getRadarSeries(e){var t=e.rows,i=e.dimension,a=e.metrics,n={};e.radar.indicator.forEach(function(e,t){n[e.name]=t});var r=t.map(function(e){var t={value:[],name:e[i]};return Object.keys(e).forEach(function(i){~a.indexOf(i)&&(t.value[n[i]]=e[i])}),t});return[{name:i,type:"radar",data:r}]}function getWaterfallTooltip(e,t){return{trigger:"axis",axisPointer:{type:"shadow"},formatter:function(i){var a=i[1];return[a.name+"<br/>"+a.seriesName+" :",""+getFormated(a.value,e,t)].join("")}}}function getWaterfallXAxis(e){var t=e.dimension,i=e.rows,a=e.remainStatus,n=e.totalName,r=e.remainName,o=e.xAxisName,s=e.axisVisible,l=[n].concat(i.map(function(e){return e[t]}));return"have-remain"===a&&(l=l.concat([r])),{type:"category",name:o,splitLine:{show:!1},data:l,show:s}}function getWaterfallYAxis(e){var t=e.dataType,i=e.yAxisName,a=e.axisVisible,n=e.digit;return{type:"value",name:i,axisTick:{show:!1},axisLabel:{formatter:function(e){return getFormated(e,t,n)}},show:a}}function getWaterfallSeries(e){var t=e.dataType,i=e.rows,a=e.metrics,n=e.totalNum,r=e.remainStatus,o=e.dataSum,s=e.digit,l={type:"bar",stack:"总量"},c=o,u=n,d=void 0,m=void 0,h=i.map(function(e){return e[a]});"have-remain"===r?(d=[0].concat(i.map(function(e){return u-=e[a]})).concat([0]),m=[n].concat(h).concat([n-o])):(d=[0].concat(i.map(function(e){return c-=e[a]})),m=[o].concat(h));var f=[];return f.push(_extends({name:"辅助",itemStyle:{normal:{opacity:0},emphasis:{opacity:0}},data:d},l)),f.push(_extends({name:"数值",label:{normal:{show:!0,position:"top",formatter:function(e){return getFormated(e.value,t,s)}}},data:m},l)),f}function getWaterfallRemainStatus(e,t){return t?t>e?"have-remain":"none-remain":"not-total"}var echarts=_interopDefault(require("echarts/lib/echarts"));require("echarts/lib/component/tooltip"),require("echarts/lib/component/legend"),require("echarts/lib/chart/bar"),require("echarts/lib/chart/line"),require("echarts/lib/chart/pie"),require("echarts/lib/chart/funnel"),require("echarts/lib/chart/radar"),echarts.registerTheme("ve-chart",{categoryAxis:{axisLine:{show:!1},axisTick:{show:!1},splitLine:{show:!1}},valueAxis:{axisLine:{show:!1}},line:{smooth:!0},grid:{containLabel:!0,left:10,right:10}});var itemPoint=function(e){return['<span style="',"background-color:"+e+";","display: inline-block;","width: 10px;","height: 10px;","border-radius: 50%;","margin-right:2px;",'"></span>'].join("")},color=["#19d4ae","#5ab1ef","#fa6e86","#ffb980","#0067a6","#c4b4e4","#d87a80","#9cbbff","#d9d0c7","#87a997","#d49ea2","#5b4947","#7ba3a8"],numberFormat=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2;if(isNaN(+e))return e;for(var i=[{value:1e18,symbol:"E"},{value:1e15,symbol:"P"},{value:1e12,symbol:"T"},{value:1e9,symbol:"B"},{value:1e6,symbol:"M"},{value:1e3,symbol:"k"}],a=0;a<i.length;a++)if(Math.abs(e)>=i[a].value)return(e/i[a].value).toFixed(t)+i[a].symbol;return e.toString()},formatTausends=function(e){return String(e).replace(/^(\s+|-)?\d+(?=.?\d*($|\s))/g,function(e){return e.replace(/(?=(?!\b)(\d{3})+$)/g,",")})},getFormated=function(e,t){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:2,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"-";if(null==e||isNaN(e))return a;switch(t){case"KMB":return numberFormat(e);case"percent":return parseFloat((100*e).toFixed(i))+"%";case"normal":return formatTausends(e);default:return e}},getStackMap=function(e){var t={};return Object.keys(e).forEach(function(i){e[i].forEach(function(e){t[e]=i})}),t},clone=function(e){return JSON.parse(JSON.stringify(e))},getType=function(e){return Object.prototype.toString.call(e)},defineProperty=function(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e},_extends=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var i=arguments[t];for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(e[a]=i[a])}return e},bar=function(e,t,i,a){var n=clone(t),r=i.axisSite,o=void 0===r?{top:[]}:r,s=i.dimension,l=void 0===s?[e[0]]:s,c=i.stack,u=void 0===c?{}:c,d=i.axisVisible,m=void 0===d||d,h=i.digit,f=void 0===h?2:h,p=i.dataOrder,g=void 0!==p&&p,v=i.scale,b=void 0===v?[!1,!1]:v,x=i.min,y=void 0===x?[null,null]:x,S=i.max,A=void 0===S?[null,null]:S,O=i.legendName,w=i.labelMap,N=i.label,T=i.itemStyle,j=i.showLine,L=a.tooltipVisible,k=a.legendVisible,V=e.slice();i.metrics?V=i.metrics:V.splice(e.indexOf(l[0]),1);var M=i.xAxisType||["normal","normal"],E=i.xAxisName||[],R=i.yAxisName||"";if(g){var F=g.label,P=g.order;F&&P?n.sort(function(e,t){return"desc"===P?e[F]-t[F]:t[F]-e[F]}):console.warn("Need to provide name and order parameters")}var H=k&&getLegend({metrics:V,labelMap:w,legendName:O}),B=getBarDimAxis({innerRows:n,dimAxisName:R,dimension:l,axisVisible:m}),_=getBarMeaAxis({meaAxisName:E,meaAxisType:M,axisVisible:m,digit:f,scale:b,min:y,max:A}),C={axisSite:o,isHistogram:!1,meaAxisType:M,digit:f,labelMap:w};return{legend:H,yAxis:B,series:getBarSeries({innerRows:n,metrics:V,stack:u,axisSite:o,isHistogram:!1,labelMap:w,itemStyle:T,label:N,showLine:j}),xAxis:_,tooltip:L&&getBarTooltip(C)}},histogram=function(e,t,i,a){var n=clone(t),r=i.axisSite,o=void 0===r?{right:[]}:r,s=i.dimension,l=void 0===s?[e[0]]:s,c=i.stack,u=void 0===c?{}:c,d=i.axisVisible,m=void 0===d||d,h=i.digit,f=void 0===h?2:h,p=i.dataOrder,g=void 0!==p&&p,v=i.scale,b=void 0===v?[!1,!1]:v,x=i.min,y=void 0===x?[null,null]:x,S=i.max,A=void 0===S?[null,null]:S,O=i.labelMap,w=i.legendName,N=i.label,T=i.itemStyle,j=i.showLine;if(g){var L=g.label,k=g.order;L&&k?n.sort(function(e,t){return"desc"===k?e[L]-t[L]:t[L]-e[L]}):console.warn("Need to provide name and order parameters")}var V=a.tooltipVisible,M=a.legendVisible,E=e.slice();i.metrics?E=i.metrics:E.splice(e.indexOf(l[0]),1);var R=i.yAxisType||["normal","normal"],F=i.yAxisName||[],P=i.xAxisName||"",H=M&&getLegend({metrics:E,labelMap:O,legendName:w}),B=getBarDimAxis({innerRows:n,dimAxisName:P,dimension:l,axisVisible:m}),_={axisSite:o,isHistogram:!0,meaAxisType:R,digit:f,labelMap:O};return{legend:H,yAxis:getBarMeaAxis({meaAxisName:F,meaAxisType:R,axisVisible:m,digit:f,scale:b,min:y,max:A}),series:getBarSeries({innerRows:n,metrics:E,stack:u,axisSite:o,isHistogram:!0,labelMap:O,itemStyle:T,label:N,showLine:j}),xAxis:B,tooltip:V&&getBarTooltip(_)}},line=function(e,t,i,a){var n=i.axisSite,r=void 0===n?{right:[]}:n,o=i.yAxisType,s=void 0===o?["normal","normal"]:o,l=i.yAxisName,c=void 0===l?[]:l,u=i.dimension,d=void 0===u?[e[0]]:u,m=i.xAxisName,h=void 0===m?[]:m,f=i.axisVisible,p=void 0===f||f,g=i.area,v=i.stack,b=i.scale,x=void 0===b?[!1,!1]:b,y=i.min,S=void 0===y?[null,null]:y,A=i.max,O=void 0===A?[null,null]:A,w=i.nullAddZero,N=void 0!==w&&w,T=i.digit,j=void 0===T?2:T,L=i.legendName,k=i.labelMap,V=i.label,M=i.itemStyle,E=i.lineStyle,R=i.areaStyle,F=a.tooltipVisible,P=a.legendVisible,H=e.slice();i.metrics?H=i.metrics:H.splice(e.indexOf(d[0]),1);var B=P&&getLegend$1({metrics:H,legendName:L,labelMap:k}),_=F&&getLineTooltip({axisSite:r,yAxisType:s,digit:j,labelMap:k}),C=getLineXAxis({dimension:d,rows:t,xAxisName:h,axisVisible:p}),W=getLineYAxis({yAxisName:c,yAxisType:s,axisVisible:p,scale:x,min:S,max:O,digit:j}),q=getLineSeries({rows:t,axisSite:r,metrics:H,area:g,stack:v,nullAddZero:N,labelMap:k,label:V,itemStyle:M,lineStyle:E,areaStyle:R});return!(!C||!q)&&{legend:B,xAxis:C,series:q,yAxis:W,tooltip:_}},pieRadius=100,ringRadius=[80,100],roseRingRadius=[20,100],pieOffsetY=200,pie=function(e,t,i,a,n){var r=clone(t),o=i.dataType,s=void 0===o?"normal":o,l=i.percentShow,c=i.dimension,u=void 0===c?e[0]:c,d=i.metrics,m=void 0===d?e[1]:d,h=i.roseType,f=void 0!==h&&h,p=i.radius,g=void 0===p?n?f?roseRingRadius:ringRadius:pieRadius:p,v=i.offsetY,b=void 0===v?pieOffsetY:v,x=i.legendLimit,y=void 0===x?30:x,S=i.selectedMode,A=void 0!==S&&S,O=i.hoverAnimation,w=void 0===O||O,N=i.digit,T=void 0===N?2:N,j=i.label,L=void 0!==j&&j,k=i.level,V=void 0!==k&&k,M=i.limitShowNum,E=void 0===M?0:M,R=a.tooltipVisible,F=a.legendVisible;E&&r.sort(function(e,t){return t[m]-e[m]});var P={innerRows:r,dimension:u,legendLimit:y,level:V,limitShowNum:E};return{series:getPieSeries({innerRows:r,dataType:s,percentShow:l,dimension:u,metrics:m,radius:g,offsetY:b,selectedMode:A,hoverAnimation:w,digit:T,roseType:f,label:L,level:V,limitShowNum:E,isRing:n}),legend:F&&getPieLegend(P),tooltip:R&&getPieTooltip({dataType:s,innerRows:r,limitShowNum:E,digit:T,metrics:m,dimension:u})}},ring=function(e,t,i,a){return pie(e,t,i,a,!0)},funnel=function(e,t,i,a){var n=e.slice(),r=t.slice(),o=i.dataType,s=void 0===o?"normal":o,l=i.dimension,c=void 0===l?n[0]:l,u=i.sequence,d=void 0===u?r.map(function(e){return e[c]}):u,m=i.digit,h=void 0===m?2:m,f=i.ascending,p=a.tooltipVisible,g=a.legendVisible,v=void 0;if(i.metrics)v=i.metrics;else{var b=n.slice();b.splice(n.indexOf(c),1),v=b[0]}return{tooltip:p&&getFunnelTooltip(s,h),legend:g&&{data:d},series:getFunnelSeries({dimension:c,metrics:v,rows:r,sequence:d,ascending:f})}},radar=function(e,t,i,a){var n=i.dataType,r=void 0===n?{}:n,o=i.dimension,s=void 0===o?e[0]:o,l=i.digit,c=void 0===l?2:l,u=a.tooltipVisible,d=a.legendVisible,m=e.slice();i.metrics?m=i.metrics:m.splice(e.indexOf(s),1);var h=d&&getRadarLegend(t,s),f=getRadarSetting(t,m);return{legend:h,tooltip:u&&getRadarTooltip(r,f,c),radar:f,series:getRadarSeries({rows:t,dimension:s,metrics:m,radar:f})}},waterfall=function(e,t,i,a){var n=i.dataType,r=void 0===n?"normal":n,o=i.dimension,s=void 0===o?e[0]:o,l=i.totalName,c=void 0===l?"总计":l,u=i.totalNum,d=i.remainName,m=void 0===d?"其他":d,h=i.xAxisName,f=void 0===h?s:h,p=i.axisVisible,g=void 0===p||p,v=i.digit,b=void 0===v?2:v,x=a.tooltipVisible,y=e.slice();y.splice(y.indexOf(s),1);var S=y[0],A=S,O=x&&getWaterfallTooltip(r,b),w=parseFloat(t.reduce(function(e,t){return e+Number(t[S])},0).toFixed(b)),N=getWaterfallRemainStatus(w,u);return{tooltip:O,xAxis:getWaterfallXAxis({dimension:s,rows:t,remainStatus:N,totalName:c,remainName:m,xAxisName:f,axisVisible:g}),yAxis:getWaterfallYAxis({dataType:r,yAxisName:A,axisVisible:g,digit:b}),series:getWaterfallSeries({dataType:r,rows:t,dimension:s,metrics:S,totalNum:u,remainStatus:N,dataSum:w,digit:b})}},Core={props:{data:{type:[Object,Array],default:function(){return{}}},settings:{type:Object,default:function(){return{}}},width:{type:String,default:"auto"},height:{type:String,default:"400px"},beforeConfig:{type:Function},afterConfig:{type:Function},afterSetOption:{type:Function},afterSetOptionOnce:{type:Function},events:{type:Object},grid:{type:Object},colors:{type:Array},tooltipVisible:{type:Boolean,default:!0},legendVisible:{type:Boolean,default:!0},legendPosition:{type:String},markLine:{type:Object},markArea:{type:Object},markPoint:{type:Object},visualMap:{type:[Object,Array]},dataZoom:{type:[Object,Array]},toolbox:{type:Object},initOptions:{type:Object,default:function(){return{}}},title:Object,legend:Object,xAxis:Object,yAxis:Object,radar:Object,tooltip:Object,axisPointer:Object,brush:Object,geo:Object,timeline:Object,graphic:Object,series:[Object,Array],backgroundColor:[Object,String],textStyle:Object,animation:Object,theme:Object,themeName:String},watch:{data:{deep:!0,handler:function(e){e&&this.dataHandler(e)}},settings:{deep:!0,handler:function(e){e.type&&this.chartLib&&(this.chartHandler=this.chartLib[e.type]),this.dataHandler(this.data)}}},computed:{canvasStyle:function(){return{width:this.width,height:this.height,position:"relative"}},chartColor:function(){return this.colors||this.theme&&this.theme.color||color}},methods:{dataHandler:function(e){if(this.chartHandler){var t=e,i=t.columns,a=void 0===i?[]:i,n=t.rows,r=void 0===n?[]:n,o={tooltipVisible:this.tooltipVisible,legendVisible:this.legendVisible,echarts:this.echarts,color:this.chartColor};this.beforeConfig&&(e=this.beforeConfig(e));var s=this.chartHandler(a,r,this.settings,o);s&&("function"==typeof s.then?s.then(this.optionsHandler):this.optionsHandler(s))}},optionsHandler:function(e){var t=this;if(this.legendPosition&&e.legend&&(e.legend[this.legendPosition]=10,~["left","right"].indexOf(this.legendPosition)&&(e.legend.top="middle",e.legend.orient="vertical")),this.themeName||(e.color=this.chartColor),["grid","dataZoom","visualMap","toolbox","title","legend","xAxis","yAxis","radar","tooltip","axisPointer","brush","geo","timeline","graphic","series","backgroundColor","textStyle"].forEach(function(i){t[i]&&(e[i]=t[i])}),this.animation&&Object.keys(this.animation).forEach(function(i){e[i]=t.animation[i]}),this.markArea||this.markLine||this.markPoint){var i={markArea:this.markArea,markLine:this.markLine,markPoint:this.markPoint},a=e.series;"[object Array]"===getType(a)?a.forEach(function(e){t.addMark(e,i)}):"[object Object]"===getType(a)&&this.addMark(a,i)}this.afterConfig&&(e=this.afterConfig(e)),this.echarts.setOption(e,!0),this.afterSetOption&&this.afterSetOption(this.echarts),this.afterSetOptionOnce&&!this._once.afterSetOptionOnce&&(this._once.afterSetOptionOnce=this.afterSetOptionOnce(this.echarts))},addMark:function(e,t){Object.keys(t).forEach(function(i){t[i]&&(e[i]=t[i])})},init:function(){if(!this.echarts){var e=this.themeName||(this.theme?"outer-theme":"ve-chart");this.echarts=this.echartsLib.init(this.$refs.canvas,e,this.initOptions),this.data&&this.dataHandler(this.data),this.events&&this.bindEvents()}},bindEvents:function(){var e=this;Object.keys(this.events).forEach(function(t){e.echarts.on(t,e.events[t])})},addWatchToProps:function(){var e=this,t=this._watchers.map(function(e){return e.expression});Object.keys(this.$props).forEach(function(i){if(!~t.indexOf(i)){var a={};"[object Object]"===getType(i)&&(a.deep=!0),e.$watch(i,function(){e.dataHandler(e.data)},a)}})},registerTheme:function(){echarts.registerTheme("outer-theme",this.theme)}},created:function(){this.echarts=null,this._once={},this.addWatchToProps(),this.theme&&this.registerTheme()},mounted:function(){this.init(),window.addEventListener("resize",this.echarts.resize)},beforeDestroy:function(){window.removeEventListener("resize",this.echarts.resize),this.echarts.dispose()}},index={render:function(){var e=this,t=e.$createElement;return(e._self._c||t)("div",{ref:"canvas",staticClass:"ve-chart",style:e.canvasStyle})},staticRenderFns:[],name:"VeChart",mixins:[Core],created:function(){this.chartLib={bar:bar,histogram:histogram,line:line,pie:pie,ring:ring,funnel:funnel,radar:radar,waterfall:waterfall},this.chartHandler=this.chartLib[this.settings.type],this.echartsLib=echarts}};module.exports=index;
